(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{473:function(e,t,r){var content=r(476);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(19).default)("8183a152",content,!0,{sourceMap:!1})},475:function(e,t,r){"use strict";var o=r(473);r.n(o).a},476:function(e,t,r){(t=r(18)(!1)).push([e.i,".custom-card-table{padding-bottom:50px}.custom-card-table .title{border-radius:5px}.custom-card-table.purple .title{background:#fff}.custom-card-table.yellow .title{background:#e5e500;color:#000}.custom-card-table.orange .title{background:#ff4500;color:#fff}.custom-card-table.green .title{background:#33b105;color:#fff}.custom-card-table.purple .title{background:#9103b1;color:#fff}.custom-card-table .title{background:#0767c6;padding:15px;color:#fff;font-weight:700}.custom-card-table .actions{text-align:right;padding:10px 15px}.custom-card-table .content{padding:15px}.custom-paginator{padding:25px}",""]),e.exports=t},477:function(e,t,r){"use strict";var o={name:"TableGeneral",props:["title","color"]},n=(r(475),r(10)),component=Object(n.a)(o,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{class:" custom-card-table "+this.color},[t("div",{staticClass:"title"},[this._v(this._s(this.title))]),this._v(" "),this._t("default")],2)}),[],!1,null,null,null);t.a=component.exports},530:function(e,t,r){"use strict";r.r(t);r(20);var o=r(3),n={layout:"dashboard",middleware:["auth"],transition:{name:"default",mode:"out-in"},components:{TableGeneral:r(477).a},head:function(){return{title:"Administración de clientes"}},data:function(){return{data:[],paginator:{limit:50,page:1},total_data:0,dialogCreateClient:!1,form:{name:"",last_name:"",second_last_name:"",email:"",password:"",role:"cliente",business_name:"",rfc:"",company_name:""},rules:{name:[{required:!0,message:"Agrega nombre",trigger:"blur"}],last_name:[{required:!0,message:"Agrega apellido",trigger:"blur"}],email:[{required:!0,message:"Agrega un correo",trigger:"blur"}],password:[{required:!0,message:"Agrega una contraseña",trigger:"blur"}],company_name:[{required:!0,message:"Agrega el nombre de la empresa",trigger:"blur"}]}}},methods:{HandleClickRow:function(e,t,r){this.$router.push("/clients/"+e.id)},handleSizeChange:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.paginator.limit=e,r.next=3,t.$axios.$get("http://23.23.191.60/api/clients",{params:t.paginator});case 3:data=r.sent,t.data=data.data.rows,t.total_data=data.data.total;case 6:case"end":return r.stop()}}),r)})))()},HandleCurrentPage:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.paginator.page=e,r.next=3,t.$axios.$get("http://23.23.191.60/api/clients",{params:t.paginator});case 3:data=r.sent,t.data=data.data.rows,t.total_data=data.data.total;case 6:case"end":return r.stop()}}),r)})))()},init:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("http://23.23.191.60/api/clients");case 2:data=t.sent,e.data=data.data.rows,e.total_data=data.data.total;case 5:case"end":return t.stop()}}),t)})))()},handleEdit:function(e,t){this.$router.push("/clients/"+t.id)},resetForm:function(e){this.$refs[e].resetFields()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.$axios.post("http://23.23.191.60/api/users",t.form).then((function(e){t.data.push(e.data.data.user),t.$notify({title:"Correcto",message:"El cliente fue creado correctamente",type:"success"}),t.dialogCreateClient=!1,t.resetForm("formUser")})).catch((function(e){t.$notify.error({title:"Error",message:"El cliente no ha posido ser creado"})}))}))}},mounted:function(){this.init()}},l=r(10),component=Object(l.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("TableGeneral",{attrs:{title:"Administración de clientes"}},[r("div",{staticClass:"actions"},[e.$currentRole(["admin"])?r("el-button",{staticClass:"el-button--primary",attrs:{icon:"el-icon-plus"},on:{click:function(t){e.dialogCreateClient=!0}}},[e._v("Crear cliente")]):e._e()],1),e._v(" "),r("div",{staticClass:"content",staticStyle:{overflow:"auto"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.data,stripe:""},on:{"row-click":e.HandleClickRow}},[r("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"50px"}}),e._v(" "),r("el-table-column",{attrs:{prop:"name",label:"Nombre","min-width":"200px"}}),e._v(" "),r("el-table-column",{attrs:{prop:"last_name",label:"Apellido","min-width":"100px"}}),e._v(" "),r("el-table-column",{attrs:{prop:"email",label:"Correo electrónico","min-width":"250px"}}),e._v(" "),r("el-table-column",{attrs:{prop:"role",label:"Rol","min-width":"100px"}}),e._v(" "),r("el-table-column",{attrs:{prop:"created_at",label:"Creado","min-width":"200px"}})],1),e._v(" "),r("div",{staticStyle:{"text-align":"center"}},[r("el-pagination",{staticClass:"custom-paginator",attrs:{"page-sizes":[50,100,200],"page-size":50,layout:"sizes, prev, pager, next",total:e.total_data},on:{"size-change":e.handleSizeChange,"current-change":e.HandleCurrentPage}})],1)],1)]),e._v(" "),r("el-dialog",{attrs:{title:"Agregar cliente",visible:e.dialogCreateClient,width:"50%"},on:{"update:visible":function(t){e.dialogCreateClient=t}}},[r("el-row",[r("el-form",{ref:"formUser",staticClass:"form-style-curds",attrs:{rules:e.rules,model:e.form}},[r("el-col",{attrs:{md:24}},[r("div",{staticClass:"content-space"},[r("b",[e._v("Información de la empresa")])])]),e._v(" "),r("el-row",[r("el-col",{attrs:{md:8}},[r("el-form-item",{attrs:{label:"Razón social",prop:"business_name"}},[r("el-input",{model:{value:e.form.business_name,callback:function(t){e.$set(e.form,"business_name",t)},expression:"form.business_name"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:8}},[r("el-form-item",{attrs:{label:"RFC",prop:"rfc"}},[r("el-input",{model:{value:e.form.rfc,callback:function(t){e.$set(e.form,"rfc",t)},expression:"form.rfc"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:8}},[r("el-form-item",{attrs:{label:"Nombre de la empresa",prop:"company_name"}},[r("el-input",{model:{value:e.form.company_name,callback:function(t){e.$set(e.form,"company_name",t)},expression:"form.company_name"}})],1)],1)],1),e._v(" "),r("el-col",{attrs:{md:24}},[r("div",{staticClass:"content-space"},[r("b",[e._v("Datos de acceso a la plataforma")])])]),e._v(" "),r("el-row",[r("el-col",{attrs:{md:8}},[r("el-form-item",{attrs:{label:"Nombre completo",prop:"name"}},[r("el-input",{attrs:{required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:8}},[r("el-form-item",{attrs:{label:"Apellido Paterno",prop:"last_name"}},[r("el-input",{model:{value:e.form.last_name,callback:function(t){e.$set(e.form,"last_name",t)},expression:"form.last_name"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:8}},[r("el-form-item",{attrs:{label:"Apellido Materno",prop:"second_last_name"}},[r("el-input",{model:{value:e.form.second_last_name,callback:function(t){e.$set(e.form,"second_last_name",t)},expression:"form.second_last_name"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:8}},[r("el-form-item",{attrs:{label:"Correo electrónico",prop:"email"}},[r("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:8}},[r("el-form-item",{attrs:{label:"Contraseña",prop:"password"}},[r("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1)],1)],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogCreateClient=!1}}},[e._v("Cancel")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("formUser")}}},[e._v("Crear cliente")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);