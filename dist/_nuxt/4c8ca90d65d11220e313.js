(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{483:function(t,e,o){var n,r,l;r=[],void 0===(l="function"==typeof(n=function(){return function t(data,e,o){var n,r,l=window,c="application/octet-stream",d=o||c,m=data,f=!e&&!o&&m,v=document.createElement("a"),y=function(a){return String(a)},_=l.Blob||l.MozBlob||l.WebKitBlob||y,w=e||"download";if(_=_.call?_.bind(l):Blob,"true"===String(this)&&(d=(m=[m,d])[0],m=m[1]),f&&f.length<2048&&(w=f.split("/").pop().split("?")[0],v.href=f,-1!==v.href.indexOf(f))){var h=new XMLHttpRequest;return h.open("GET",f,!0),h.responseType="blob",h.onload=function(e){t(e.target.response,w,c)},setTimeout((function(){h.send()}),0),h}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(m)){if(!(m.length>2096103.424&&_!==y))return navigator.msSaveBlob?navigator.msSaveBlob(C(m),w):T(m);d=(m=C(m)).type||c}else if(/([\x80-\xff])/.test(m)){for(var i=0,x=new Uint8Array(m.length),k=x.length;i<k;++i)x[i]=m.charCodeAt(i);m=new _([x],{type:d})}function C(t){for(var e=t.split(/[:;,]/),o=e[1],n=("base64"==e[2]?atob:decodeURIComponent)(e.pop()),r=n.length,i=0,l=new Uint8Array(r);i<r;++i)l[i]=n.charCodeAt(i);return new _([l],{type:o})}function T(t,e){if("download"in v)return v.href=t,v.setAttribute("download",w),v.className="download-js-link",v.innerHTML="downloading...",v.style.display="none",document.body.appendChild(v),setTimeout((function(){v.click(),document.body.removeChild(v),!0===e&&setTimeout((function(){l.URL.revokeObjectURL(v.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,c)),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var o=document.createElement("iframe");document.body.appendChild(o),!e&&/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,c)),o.src=t,setTimeout((function(){document.body.removeChild(o)}),333)}if(n=m instanceof _?m:new _([m],{type:d}),navigator.msSaveBlob)return navigator.msSaveBlob(n,w);if(l.URL)T(l.URL.createObjectURL(n),!0);else{if("string"==typeof n||n.constructor===y)try{return T("data:"+d+";base64,"+l.btoa(n))}catch(t){return T("data:"+d+","+encodeURIComponent(n))}(r=new FileReader).onload=function(t){T(this.result)},r.readAsDataURL(n)}return!0}})?n.apply(e,r):n)||(t.exports=l)},484:function(t,e,o){var content=o(502);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(19).default)("4d7b2641",content,!0,{sourceMap:!1})},501:function(t,e,o){"use strict";var n=o(484);o.n(n).a},502:function(t,e,o){(e=o(18)(!1)).push([t.i,".add-todo{padding-top:15px}.el-card-custom{margin:25px 0}.el-card-custom .el-card__body{height:550px;overflow-y:scroll}.date-todo{padding:15px 0}.my-task{border-radius:15px;border:1px solid #5d3ce7;margin-bottom:15px}.my-task .header{font-weight:700}.my-task .body-info,.my-task .date-info{padding:15px;height:90px}.my-task .date-info{border-radius:15px 0 0 15px;background:#31207b;color:#fff}.my-task .date-info .hour{text-align:center;font-weight:700}.my-task .date-info .type{text-transform:capitalize;text-align:center;font-size:12px;padding-top:15px}.my-task .body-info{position:relative}.my-task .body-info .client{text-align:right;font-size:10px;color:#31207b}.my-task .body-info .client .name{font-size:13px;font-weight:700}.my-task .body-info .activity{padding-top:15px;font-size:15px;font-weight:700;text-align:center}.my-task .body-info .view-info{position:absolute;left:0;top:0}",""]),t.exports=e},527:function(t,e,o){"use strict";o.r(e);o(20);var n=o(3),r=o(0),l=o.n(r),c=o(481),d=o.n(c),m=o(483),f=o.n(m),v={name:"Tasks",props:["tasks"],data:function(){return{show_detail:!1}},methods:{showActivity:function(t,e,o){"service"===t?this.$router.push("/services/"+e):this.$emit("detailActivity",o)}}},y=o(10),_={layout:"dashboard",middleware:["auth"],components:{Tasks:Object(y.a)(v,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",t._l(t.tasks,(function(e){return o("el-row",{staticClass:"my-task",attrs:{gutter:20}},[o("el-col",{staticClass:"date-info",attrs:{xs:8,sm:8,md:8}},[o("p",{staticClass:"hour"},[t._v(t._s(t.$getHour(e.date_activity)))]),t._v(" "),o("p",{staticClass:"type"},[t._v(t._s(t.$getTypeOfActivity(e.type_activity)))])]),t._v(" "),o("el-col",{staticClass:"body-info",attrs:{xs:16,sm:16,md:16}},[o("div",[e.client_id?o("p",{staticClass:"client"},[t._v("Cliente: "),o("span",{staticClass:"name"},[t._v(t._s(e.client_name))])]):o("p",{staticClass:"client"},[t._v("Actividad Personal")]),t._v(" "),o("p",{staticClass:"activity"},[t._v(t._s(t.$getActivity(e.activity)))]),t._v(" "),o("el-button",{staticClass:"view-info",attrs:{type:"info",size:"small",icon:"el-icon-view"},on:{click:function(o){return t.showActivity(e.type,e.id,e)}}},[t._v("Detalle")])],1)])],1)})),1)}),[],!1,null,"6f057700",null).exports},head:function(){return{title:"Plan de trabajo"}},data:function(){return{loading:!1,loading_activities:!1,windowWidth:0,detail_view:!1,value:"",now:l.a.now(),todo_day:[],todo_week:[],viewFormTodo:!1,clients:[],form:{type:"remote",activity:"develop-project",kms:0,client_id:"",status:"open",date:""}}},methods:{showActivity:function(t){this.detail_view=!0,this.viewFormTodo=!0,t.date=t.date_activity,t.type=t.type_activity,t.status="open",this.form=t,console.log(t)},updateCalendar:function(){this.getTodo()},DownloadPlanWeek:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o,n,data,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,o=l()(t.now).locale("es-mx").startOf("week").format("YYYY-MM-DD"),n=l()(t.now).locale("es-mx").endOf("week").format("YYYY-MM-DD"),data={start_week:o,end_week:n},e.next=6,t.$axios.$post("http://api.diken.mx/api/download/file/plan_week",data);case 6:r=e.sent,f()(atob(r),"plan.pdf","application/pdf"),t.loading=!1;case 9:case"end":return e.stop()}}),e)})))()},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},resetForm:function(t){this.$refs[t].resetFields()},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(e.form.date=l()(e.form.date).locale("es-mx").format("Y-M-D H:mm"),!t)return!1;"no"===e.form.client_id&&delete e.form.client_id,e.$axios.post("http://api.diken.mx/api/todo",e.form).then((function(t){e.$notify({title:"Correcto",message:"La tarea fue creada correctamente",type:"success"}),e.viewFormTodo=!1,e.form={type:"remote",activity:"develop-project",kms:0,client_id:"",status:"open",date:""},e.getTodo()})).catch((function(t){e.$notify.error({title:"Error",message:"La tarea no pudo ser creada"})}))}))},updateActivity:function(t){var e=this;this.$refs[t].validate((function(t){if(e.form.date=l()(e.form.date).locale("es-mx").format("Y-M-D H:mm"),!t)return!1;"no"===e.form.client_id&&delete e.form.client_id,e.$axios.patch("http://api.diken.mx/api/todo/"+e.form.id,e.form).then((function(t){e.$notify({title:"Correcto",message:"La tarea fue actualizada correctamente",type:"success"}),e.viewFormTodo=!1,e.form={type:"remote",activity:"develop-project",kms:0,client_id:"",status:"open",date:""},e.getTodo()})).catch((function(t){e.$notify.error({title:"Error",message:"La tarea no pudo ser actualizada"})}))}))},addTodo:function(){this.detail_view=!1,this.viewFormTodo=!0},getTodo:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o,n,r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=l()(t.now).format("YYYY-MM-DD"),n=l()(t.now).locale("es-mx").startOf("week").format("YYYY-MM-DD"),r=l()(t.now).locale("es-mx").endOf("week").format("YYYY-MM-DD"),e.next=5,t.$axios.$get("http://api.diken.mx/api/todo?date="+o+"&start_week="+n+"&end_week="+r);case 5:data=e.sent,t.todo_day=data.data.day,t.todo_week=data.data.week,t.loading_activities=!1;case 9:case"end":return e.stop()}}),e)})))()}},computed:{startWeek:function(){return l()(this.now).locale("es-mx").startOf("week").format("LL")},endWeek:function(){return l()(this.now).locale("es-mx").endOf("week").format("LL")},activities_by_week:function(){return d.a.groupBy(this.todo_week,(function(t){return l()(t.date_activity).locale("es-mx").startOf("day").format("LL")}))}},fetch:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTodo();case 2:return e.next=4,t.$axios.$get("http://api.diken.mx/api/clients?limit=200");case 4:o=e.sent,t.clients=o.data.rows;case 6:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;this.windowWidth=window.innerWidth,window.addEventListener("resize",(function(){t.windowWidth=window.innerWidth}))}},w=(o(501),Object(y.a)(_,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[o("el-row",{attrs:{gutter:15}},[o("el-col",{attrs:{xs:12,md:24}},[o("h2",{staticClass:"primary-color"},[t._v("Plan de trabajo")]),t._v(" "),o("p",[t._v(t._s(t.$convertDate(t.now)))])])],1),t._v(" "),o("el-row",{staticStyle:{padding:"25px 0"}},[o("el-col",{attrs:{xs:12,md:12}},[o("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:t.addTodo}},[t._v("Agregar Actividad")])],1),t._v(" "),o("el-col",{attrs:{xs:12,md:12}},[o("div",{staticStyle:{"text-align":"right"}},[o("p",[t._v("Revisar fecha")]),t._v(" "),o("br"),t._v(" "),o("el-date-picker",{attrs:{format:"d/M/yyyy",type:"date",placeholder:"Selecciona una día"},on:{change:t.updateCalendar},model:{value:t.now,callback:function(e){t.now=e},expression:"now"}})],1)])],1),t._v(" "),o("el-row",{attrs:{gutter:25}},[o("el-col",{attrs:{xs:24,md:12}},[o("h3",{staticStyle:{"padding-top":"25px"}},[t._v("Hoy "),o("span",{staticStyle:{"font-size":"12px"}},[t._v("("+t._s(t.$convertDate(t.now))+")")])]),t._v(" "),o("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading_activities,expression:"loading_activities"}],staticClass:"el-card-custom"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[t._v("Plan de trabajo del día")])]),t._v(" "),t.todo_day.length>0?o("Tasks",{attrs:{tasks:t.todo_day},on:{detailActivity:function(e){return t.showActivity(e)}}}):o("div",{staticStyle:{"text-align":"center"}},[o("p",[t._v("No hay actividades")])])],1)],1),t._v(" "),o("el-col",{attrs:{xs:24,md:12}},[o("el-divider",{staticClass:"only-tablet"}),t._v(" "),o("h3",{staticStyle:{"padding-top":"25px"}},[t._v("Semanal "),o("span",{staticStyle:{"font-size":"12px"}},[t._v("(del "+t._s(t.startWeek)+" al "+t._s(t.endWeek)+")")])]),t._v(" "),o("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading_activities,expression:"loading_activities"}],staticClass:"el-card-custom"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[t._v("Plan de trabajo de la semana")]),t._v(" "),o("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.DownloadPlanWeek}},[t._v("Descargar el plan semanal")])],1),t._v(" "),t.isEmpty(t.activities_by_week)?o("div",{staticStyle:{"text-align":"center"}},[o("p",[t._v("No hay actividades")])]):t._l(t.activities_by_week,(function(e,n){return o("div",{staticClass:"list-by-date"},[o("h4",{staticClass:"date-todo"},[t._v(t._s(n))]),t._v(" "),o("Tasks",{attrs:{tasks:e},on:{detailActivity:function(e){return t.showActivity(e)}}})],1)}))],2)],1)],1),t._v(" "),o("el-dialog",{attrs:{title:"Programar actividad",visible:t.viewFormTodo,width:t.$getWidthModal(t.windowWidth)},on:{"update:visible":function(e){t.viewFormTodo=e}}},[o("p",[t._v("A continuación ingresa los detalles de la actividad a realizar.")]),t._v(" "),o("el-form",{ref:"formTodo",staticClass:"add-todo",attrs:{model:t.form,disabled:!1}},[o("el-row",{attrs:{gutter:15}},[o("el-col",{attrs:{md:12}},[o("el-form-item",{attrs:{label:"Tipo de actividad"}},[o("el-select",{attrs:{placeholder:"Selecciona el tipo de actividad"},on:{change:function(e){t.form.kms=0}},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[o("el-option",{attrs:{label:"Remoto",value:"remote"}}),t._v(" "),o("el-option",{attrs:{label:"Presencial",value:"face-to-face"}})],1)],1)],1),t._v(" "),o("el-col",{attrs:{md:12}},[o("el-form-item",{attrs:{label:"Actividad"}},[o("el-select",{attrs:{placeholder:"Selecciona el tipo de actividad"},model:{value:t.form.activity,callback:function(e){t.$set(t.form,"activity",e)},expression:"form.activity"}},[o("el-option",{attrs:{label:"Presentación de proyecto",value:"presentation-project"}}),t._v(" "),o("el-option",{attrs:{label:"Presentación de sistema",value:"presentation-system"}}),t._v(" "),o("el-option",{attrs:{label:"Desarrollo de proyecto",value:"develop-project"}}),t._v(" "),o("el-option",{attrs:{label:"Instalación de sistema",value:"installation-of-system"}}),t._v(" "),o("el-option",{attrs:{label:"Calibración de equipo",value:"calibration-of-equipment"}}),t._v(" "),o("el-option",{attrs:{label:"Presentación de proyecto",value:"start-system-ccs"}}),t._v(" "),o("el-option",{attrs:{label:"Presentación de proyecto",value:"delivery-system"}}),t._v(" "),o("el-option",{attrs:{label:"Otra",value:"other"}})],1)],1)],1),t._v(" "),o("el-col",{attrs:{md:12}},[o("el-form-item",{attrs:{label:"Fecha y hora de la actividad"}},[o("el-date-picker",{attrs:{type:"datetime",placeholder:"Selecciona fecha y hora"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1)],1),t._v(" "),o("el-col",{attrs:{md:12}},[o("el-form-item",{attrs:{label:"Nombre del Cliente / Empresa",prop:"client_id"}},[o("el-select",{attrs:{filterable:"",placeholder:"Selecciona un cliente"},model:{value:t.form.client_id,callback:function(e){t.$set(t.form,"client_id",e)},expression:"form.client_id"}},[o("el-option",{attrs:{label:"No aplica",value:"no",selected:""}},[t._v("No aplica")]),t._v(" "),t._l(t.clients,(function(t){return o("el-option",{key:t.id,attrs:{label:t.company_name,value:t.id}})}))],2)],1)],1),t._v(" "),o("el-col",{attrs:{md:24}},[o("el-form-item",{attrs:{label:"Descripción de la actividad"}},[o("el-input",{attrs:{type:"textarea"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),t._v(" "),"face-to-face"===t.form.type?o("el-col",{attrs:{md:10}},[o("el-form-item",{attrs:{label:"Distancia en kilometros"}},[o("el-input-number",{attrs:{min:0,max:1e3},model:{value:t.form.kms,callback:function(e){t.$set(t.form,"kms",e)},expression:"form.kms"}})],1)],1):t._e()],1)],1),t._v(" "),!1===t.detail_view?o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.viewFormTodo=!1}}},[t._v("Cancelar")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("formTodo")}}},[t._v("Agregar actividad")])],1):o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.viewFormTodo=!1}}},[t._v("Cancelar")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updateActivity("formTodo")}}},[t._v("Actualizar actividad")])],1)],1)],1)}),[],!1,null,null,null));e.default=w.exports}}]);