(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{474:function(e,t,r){var content=r(476);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(19).default)("8183a152",content,!0,{sourceMap:!1})},475:function(e,t,r){"use strict";var o=r(474);r.n(o).a},476:function(e,t,r){(t=r(18)(!1)).push([e.i,".custom-card-table{padding-bottom:50px}.custom-card-table .title{border-radius:5px}.custom-card-table.purple .title{background:#fff}.custom-card-table.yellow .title{background:#e5e500;color:#000}.custom-card-table.orange .title{background:#ff4500;color:#fff}.custom-card-table.green .title{background:#33b105;color:#fff}.custom-card-table.purple .title{background:#9103b1;color:#fff}.custom-card-table .title{background:#0767c6;padding:15px;color:#fff;font-weight:700}.custom-card-table .actions{text-align:right;padding:10px 15px}.custom-card-table .content{padding:15px}.custom-paginator{padding:25px}",""]),e.exports=t},477:function(e,t,r){"use strict";var o={name:"TableGeneral",props:["title","color"]},l=(r(475),r(10)),component=Object(l.a)(o,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{class:" custom-card-table "+this.color},[t("div",{staticClass:"title"},[this._v(this._s(this.title))]),this._v(" "),this._t("default")],2)}),[],!1,null,null,null);t.a=component.exports},488:function(e,t,r){var content=r(512);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(19).default)("e50850ee",content,!0,{sourceMap:!1})},489:function(e,t,r){var content=r(514);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(19).default)("35471f86",content,!0,{sourceMap:!1})},511:function(e,t,r){"use strict";var o=r(488);r.n(o).a},512:function(e,t,r){(t=r(18)(!1)).push([e.i,"th div{color:#000}",""]),e.exports=t},513:function(e,t,r){"use strict";var o=r(489);r.n(o).a},514:function(e,t,r){(t=r(18)(!1)).push([e.i,'.el-dialog__header:after{content:"";width:90%;position:absolute;top:60px;left:5%;padding:0 10px;border-bottom:1px solid #1989fa}',""]),e.exports=t},539:function(e,t,r){"use strict";r.r(t);r(23),r(20);var o=r(3),l=r(482),n=r.n(l),c={props:["data","total_data","role"],data:function(){return{deleteVisible:!1,paginator:{limit:50,page:1,role:this.role},user_to_delete:{}}},methods:{handleDelete:function(e,t){this.user_to_delete=t,this.deleteVisible=!0},deleteUser:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$axios.$delete("//api.diken.mx/api/users/"+e);case 2:t.deleteVisible=!1,t.$notify({title:"Eliminación",message:"Usuario eliminado correctamente",type:"success"});case 4:case"end":return r.stop()}}),r)})))()},handleEdit:function(e,t){this.$router.push("/users/"+t.id)},handleSizeChange:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.paginator.limit=e,r.next=3,t.$axios.$get("//api.diken.mx/api/users",{params:t.paginator});case 3:data=r.sent,t.data=data.data.rows,t.total_data=data.data.total;case 6:case"end":return r.stop()}}),r)})))()},HandleCurrentPage:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.paginator.page=e,r.next=3,t.$axios.$get("//api.diken.mx/api/users",{params:t.paginator});case 3:data=r.sent,t.data=data.data.rows,t.total_data=data.data.total;case 6:case"end":return r.stop()}}),r)})))()}}},d=(r(511),r(10)),m={layout:"dashboard",middleware:["auth"],transition:{name:"default",mode:"out-in"},components:{TableUsers:Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"TableUsers"},[r("el-row",[r("el-col",{attrs:{md:24}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.data,stripe:""}},[r("el-table-column",{attrs:{prop:"name",label:"Nombre"}}),e._v(" "),r("el-table-column",{attrs:{prop:"last_name",label:"Apellido"}}),e._v(" "),r("el-table-column",{attrs:{prop:"email",label:"Correo electrónico"}}),e._v(" "),r("el-table-column",{attrs:{prop:"role",label:"Rol",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{prop:"created_at",label:"Creado"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"Operaciones"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.handleEdit(t.$index,t.row)}}},[e._v("Editar")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleDelete(t.$index,t.row)}}},[e._v("Eliminar")])]}}])})],1),e._v(" "),r("el-pagination",{staticClass:"custom-paginator",attrs:{"page-sizes":[50,100,200],"page-size":50,layout:"sizes, prev, pager, next",total:e.total_data},on:{"size-change":e.handleSizeChange,"current-change":e.HandleCurrentPage}})],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"Atención",visible:e.deleteVisible,width:"30%",center:""},on:{"update:visible":function(t){e.deleteVisible=t}}},[r("div",{staticStyle:{"text-align":"center"}},[r("span",[e._v("¿Seguro que quieres eliminar este usuario?")]),r("br"),e._v(" "),r("span",[r("b",[e._v(e._s(e.user_to_delete.name))])]),r("br"),e._v(" "),r("span",[e._v("Esta acción no se puede deshacer")])]),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.deleteVisible=!1}}},[e._v("Cancelar")]),e._v(" "),r("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteUser(e.user_to_delete.id)}}},[e._v("Confirmar")])],1)])],1)}),[],!1,null,null,null).exports,TableGeneral:r(477).a},head:function(){return{title:"Administración de usuarios"}},data:function(){return{data:[],total_data:0,paginator:{limit:50,page:1,role:this.role},activeName:"all",dialogCreateUser:!1,form:{name:"",last_name:"",second_last_name:"",email:"",password:"",role:""},rules:{name:[{required:!0,message:"Agrega nombre",trigger:"blur"}],last_name:[{required:!0,message:"Agrega apellido",trigger:"blur"}],email:[{required:!0,message:"Agrega un correo",trigger:"blur"}],password:[{required:!0,message:"Agrega una contraseña",trigger:"blur"}],role:[{required:!0,message:"Agrega un rol",trigger:"blur"}]}}},methods:{handleClick:function(e,t){var r=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"all"!==e.name?r.paginator.role=e.name:r.paginator.role="",t.next=3,r.$axios.$get("//api.diken.mx/api/users",{params:r.paginator});case 3:data=t.sent,r.data=data.data.rows,r.total_data=data.data.total;case 6:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("//api.diken.mx/api/users");case 2:data=t.sent,e.data=data.data.rows,e.total_data=data.data.total;case 5:case"end":return t.stop()}}),t)})))()},myTable:function(e){return e?n.a.filter(this.data,{role:e}):this.data},resetForm:function(e){this.$refs[e].resetFields()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.$axios.post("//api.diken.mx/api/users",t.form).then((function(e){t.data.push(e.data.data.user),t.$notify({title:"Correcto",message:"El usuario fue creado correctamente",type:"success"}),t.dialogCreateUser=!1,t.resetForm("formUser")})).catch((function(e){t.$notify.error({title:"Error",message:"El usuario no ha posido ser creado"})}))}))}},mounted:function(){this.init()}},f=(r(513),Object(d.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("TableGeneral",{attrs:{title:"Administración de usuarios"}},[r("div",{staticClass:"actions"},[r("el-button",{staticClass:"el-button--primary",attrs:{icon:"el-icon-plus"},on:{click:function(t){e.dialogCreateUser=!0}}},[e._v("Crear usuario")])],1),e._v(" "),r("div",{staticClass:"content"},[r("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"Todos",name:"all"}},[r("TableUsers",{attrs:{data:e.myTable(),total_data:e.total_data}})],1),e._v(" "),r("el-tab-pane",{attrs:{label:"Técnicos",name:"tecnico"}},[r("TableUsers",{attrs:{data:e.myTable("tecnico"),total_data:e.total_data,role:"tecnico"}})],1),e._v(" "),r("el-tab-pane",{attrs:{label:"Asesores",name:"asesor"}},[r("TableUsers",{attrs:{data:e.myTable("asesor"),total_data:e.total_data,role:"asesor"}})],1),e._v(" "),r("el-tab-pane",{attrs:{label:"Administradores",name:"admin"}},[r("TableUsers",{attrs:{data:e.myTable("admin"),total_data:e.total_data,role:"admin"}})],1)],1)],1)]),e._v(" "),r("el-dialog",{attrs:{title:"Agregar usuario",visible:e.dialogCreateUser,width:"60%"},on:{"update:visible":function(t){e.dialogCreateUser=t}}},[r("el-row",[r("el-form",{ref:"formUser",staticClass:"form-style-curds",attrs:{rules:e.rules,model:e.form}},[r("el-col",{attrs:{md:8}},[r("el-form-item",{attrs:{label:"Nombre completo",prop:"name"}},[r("el-input",{attrs:{required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:8}},[r("el-form-item",{attrs:{label:"Apellido Paterno",prop:"last_name"}},[r("el-input",{model:{value:e.form.last_name,callback:function(t){e.$set(e.form,"last_name",t)},expression:"form.last_name"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:8}},[r("el-form-item",{attrs:{label:"Apellido Materno",prop:"second_last_name"}},[r("el-input",{model:{value:e.form.second_last_name,callback:function(t){e.$set(e.form,"second_last_name",t)},expression:"form.second_last_name"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:24}},[r("div",{staticClass:"content-space"},[r("p",[e._v("Datos de acceso a la plataforma")])])]),e._v(" "),r("el-col",{attrs:{md:8}},[r("el-form-item",{attrs:{label:"Correo electrónico",prop:"email"}},[r("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:8}},[r("el-form-item",{attrs:{label:"Contraseña",prop:"password"}},[r("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:8}},[r("el-form-item",{attrs:{label:"Rol de usuario",prop:"role"}},[r("el-select",{attrs:{placeholder:"Selecciona un rol"},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},[r("el-option",{attrs:{label:"Asesor",value:"asesor"}}),e._v(" "),r("el-option",{attrs:{label:"Tecnico",value:"tecnico"}})],1)],1)],1)],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogCreateUser=!1}}},[e._v("Cancel")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("formUser")}}},[e._v("Crear usuario")])],1)],1)],1)}),[],!1,null,null,null));t.default=f.exports}}]);